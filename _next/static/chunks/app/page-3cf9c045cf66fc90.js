(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{41234:()=>{},85453:(e,t,n)=>{Promise.resolve().then(n.bind(n,57801))},57801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var i=n(95155),l=n(12115),a=n(58581),s=n(29118),r=n(15255),o=n(12800),u=n(66963),d=n(40798),c=n(27112),p=n(8710);let h=[{x:2,y:2,z:0},{x:100,y:100,z:1}],x=e=>{let{active:t,payload:n}=e;if(t&&n&&n.length){var l,a,s;return(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"5px 10px",border:"1px solid #ccc"},children:[(0,i.jsx)("p",{children:"x: ".concat(null===(l=n[0].value)||void 0===l?void 0:l.toFixed(5))}),(0,i.jsx)("p",{children:"y: ".concat(null===(a=n[1].value)||void 0===a?void 0:a.toFixed(5))}),(0,i.jsx)("p",{children:"mass: ".concat(null===(s=n[2].value)||void 0===s?void 0:s.toFixed(5))})]})}return null},g=e=>{let{distribution1:t,distribution2:n,bounds:g,width:_,height:m}=e,[y,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)([]),[b,M]=(0,l.useState)([]);return((0,l.useEffect)(()=>{f(!0),j(h.concat((t.points||[]).map((e,n)=>({x:e.x,y:e.y,z:t.weights[n]||0})))),M(h.concat(((null==n?void 0:n.points)||[]).map((e,t)=>({x:e.x,y:e.y,z:(null==n?void 0:n.weights[t])||0}))))},[t,n]),y)?(0,i.jsx)(a.u,{aspect:_/m,width:"100%",minWidth:300,children:(0,i.jsxs)(s.t,{margin:{top:20,right:20,bottom:20,left:20},children:[(0,i.jsx)(r.d,{}),(0,i.jsx)(o.W,{type:"number",hide:!0,dataKey:"x",domain:[g.xMin,g.xMax],allowDataOverflow:!0}),(0,i.jsx)(u.h,{type:"number",hide:!0,dataKey:"y",domain:[g.yMin,g.yMax],allowDataOverflow:!0}),(0,i.jsx)(d.K,{dataKey:"z",range:[100,100*t.points.length],zAxisId:1}),(0,i.jsx)(d.K,{dataKey:"z",range:[100,100*t.points.length],zAxisId:2}),(0,i.jsx)(c.m,{content:(0,i.jsx)(x,{})}),(0,i.jsx)(p.X,{name:"Distribution 1",data:v,fill:"#8884d8",fillOpacity:.4,shape:"circle",zAxisId:1}),n&&(0,i.jsx)(p.X,{name:"Distribution 2",data:b,fill:"#E57373",fillOpacity:.6,shape:"circle",zAxisId:2})]})}):null};var _=n(39567),m=n.n(_);let y=(e,t)=>e.x>=t.xMin&&e.x<=t.xMax&&e.y>=t.yMin&&e.y<=t.yMax,f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t+n*Math.sqrt(-2*Math.log(e()))*Math.cos(2*Math.PI*e())},v=(e,t,n)=>{let i=m()(e),l=[];for(let e=0;e<t;e++)l.push({x:n.xMin+i()*(n.xMax-n.xMin),y:n.yMin+i()*(n.yMax-n.yMin)});return{points:l,weights:Array(t).fill(1/t)}},j=(e,t,n,i,l)=>{let a=m()(e),s=[];for(;s.length<t;){let e={x:f(a,n.x,i),y:f(a,n.y,i)};y(e,l)&&s.push(e)}return{points:s,weights:Array(t).fill(1/t)}},b=(e,t,n,i)=>{let l=m()(e),a=[];for(let e=0;e<t;e++){let e=2*l()*Math.PI,t=i*Math.sqrt(l());a.push({x:n.x+t*Math.cos(e),y:n.y+t*Math.sin(e)})}return{points:a,weights:Array(t).fill(1/t)}};var M=n(83572),N=n.n(M);let I=(e,t,n)=>{let i=n.length,l=Array(i);for(let e=0;e<i;e++){l[e]=Array(i);for(let n=0;n<i;n++)l[e][n]=t(e,n)}let a=Array(i).fill(0);for(let e=0;e<i;e++)a[e]=n.reduce((t,n,i)=>t+n*l[i][e],0);let s=Number.POSITIVE_INFINITY,r=-1;for(let e=0;e<i;e++)a[e]<s&&(s=a[e],r=e);let o=[r],u=new Set(Array.from({length:i},(e,t)=>t));for(u.delete(r);o.length<e;){let e=o[o.length-1];for(let t of u){let n=l[t][e],i=l[t];for(let e of u)i[e]=Math.min(i[e],n)}for(let e of u)a[e]=Array.from(u).reduce((t,i)=>t+n[i]*l[i][e],0);let t=-1,i=Number.POSITIVE_INFINITY;for(let e of u)a[e]<i&&(i=a[e],t=e);o.push(t),N()(u.delete(t))}return o},C=(e,t,n)=>{let i=n.length,l=e.length,a=e.map(e=>n[e]),s=new Set(e);for(let r=0;r<i;r++)if(!s.has(r)){let i=Number.POSITIVE_INFINITY,s=-1;for(let n=0;n<l;n++){let l=t(r,e[n]);l<i&&(i=l,s=n)}a[s]+=n[r]}return a},w={points:[],weights:[]};var S=n(68334),F=n.n(S);let A={xMin:0,xMax:1,yMin:0,yMax:1},z=(e,t,n)=>{switch(e){case"uniform":return v(t,n,A);case"gaussian":return j(t,n,{x:.5,y:.5},.3,A);case"circular":return b(t,n,{x:.5,y:.5},.5)}},P=e=>(t,n)=>{let i=e[t],l=e[n];return Math.sqrt((i.x-l.x)**2+(i.y-l.y)**2)},B=()=>{let[e,t]=(0,l.useState)(50),[n,a]=(0,l.useState)("42"),[s,r]=(0,l.useState)("uniform"),[o,u]=(0,l.useState)(w),[d,c]=(0,l.useState)([]),[p,h]=(0,l.useState)(w),[x,_]=(0,l.useState)(0),[m,y]=(0,l.useState)(!1),f=(0,l.useCallback)(()=>{let t=z(s,n,e);u(t),c(I(t.points.length,P(t.points),t.weights)),_(0),y(!1),h(w)},[n,s,e]),v=(0,l.useCallback)(e=>{if(0===e||!o.points.length)return w;let t=d.slice(0,e),n=C(t,P(o.points),o.weights);return{points:t.map(e=>o.points[e]),weights:n}},[o,d]);return(0,l.useEffect)(()=>{h(v(x))},[x,v]),(0,l.useEffect)(()=>{if(!m||!o.points.length)return;let e=setInterval(()=>{_(e=>e>=d.length?(y(!1),e):e+1)},500);return()=>clearInterval(e)},[m,d.length,o.points.length]),(0,i.jsx)("div",{className:F().page,children:(0,i.jsxs)("main",{className:F().main,children:[(0,i.jsx)("h1",{children:"Scenario Reduction"}),(0,i.jsxs)("div",{className:F().controlsContainer,children:[(0,i.jsxs)("div",{className:F().topControls,children:[(0,i.jsxs)("div",{className:F().pointsInput,children:[(0,i.jsx)("label",{htmlFor:"numberOfPoints",children:"N:"}),(0,i.jsx)("input",{type:"number",id:"numberOfPoints",value:e,onChange:e=>t(Number(e.target.value)),min:"10",max:"1000",className:F().numberField})]}),(0,i.jsxs)("div",{className:F().seedInput,children:[(0,i.jsx)("label",{htmlFor:"seed",children:"Seed:"}),(0,i.jsx)("input",{type:"text",id:"seed",value:n,onChange:e=>a(e.target.value),className:F().seedField})]}),(0,i.jsxs)("div",{className:F().distributionSelect,children:[(0,i.jsx)("label",{htmlFor:"distribution-type",children:"Base Distribution:"}),(0,i.jsxs)("select",{id:"distribution-type",value:s,onChange:e=>r(e.target.value),className:F().distributionField,children:[(0,i.jsx)("option",{value:"uniform",children:"Uniform"}),(0,i.jsx)("option",{value:"gaussian",children:"Gaussian"}),(0,i.jsx)("option",{value:"circular",children:"Circular Uniform"})]})]}),(0,i.jsx)("button",{onClick:f,className:F().generateButton,children:"Generate"})]}),o.points.length>0&&(0,i.jsxs)("div",{className:F().playControls,children:[(0,i.jsx)("button",{onClick:()=>{x>=d.length&&_(0),y(e=>!e)},className:F().playButton,children:m?"Pause":"Play"}),(0,i.jsxs)("div",{className:F().sliderContainer,children:[(0,i.jsx)("input",{type:"range",min:"0",max:d.length,value:x,onChange:e=>{_(Number(e.target.value)),y(!1)},className:F().slider}),(0,i.jsxs)("span",{className:F().stepCount,children:[x,"/",d.length]})]})]})]}),(0,i.jsxs)("div",{className:F().currentVisualization,children:[(0,i.jsxs)("h3",{children:["Using ",x," point(s)"]}),(0,i.jsx)(g,{distribution1:o,distribution2:p,bounds:{xMin:0,xMax:1,yMin:0,yMax:1},width:600,height:600})]})]})})};function O(){return(0,i.jsx)(B,{})}},68334:e=>{e.exports={page:"page_page__ZU32B",main:"page_main__GlU4n",ctas:"page_ctas__g5wGe",primary:"page_primary__V8M9Y",secondary:"page_secondary__lm_PT",footer:"page_footer__sHKi3",seedInput:"page_seedInput__MwBpR",seedField:"page_seedField__n5xVl",pointsInput:"page_pointsInput__wnFBr",numberField:"page_numberField__vIebA",controls:"page_controls__MGrPX",generateButton:"page_generateButton__brATS",playButton:"page_playButton__egZrD",distributionSelect:"page_distributionSelect__KyIMJ",distributionField:"page_distributionField__IHZpc",sliderContainer:"page_sliderContainer__9hu_f",slider:"page_slider__ByN4U",stepCount:"page_stepCount___uJaP",controlsContainer:"page_controlsContainer__ygMcm",topControls:"page_topControls__2nMnR",playControls:"page_playControls__pjrgY",currentVisualization:"page_currentVisualization__w8DiX",logo:"page_logo__7fc9l"}}},e=>{var t=t=>e(e.s=t);e.O(0,[397,159,441,517,358],()=>t(85453)),_N_E=e.O()}]);