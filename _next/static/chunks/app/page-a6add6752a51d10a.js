(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{41234:()=>{},85453:(e,t,n)=>{Promise.resolve().then(n.bind(n,57801))},57801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var s=n(95155),a=n(12115),l=n(29118),i=n(15255),r=n(12800),o=n(66963),u=n(40798),c=n(27112),d=n(8710);let h=[{x:2,y:2,z:0},{x:100,y:100,z:1}],p=e=>{let{distribution1:t,distribution2:n,bounds:p,width:x,height:g}=e,[_,y]=(0,a.useState)(!1),[f,m]=(0,a.useState)([]),[M,j]=(0,a.useState)([]);return((0,a.useEffect)(()=>{y(!0),m(h.concat((t.points||[]).map((e,n)=>({x:e.x,y:e.y,z:t.weights[n]||0})))),j(h.concat(((null==n?void 0:n.points)||[]).map((e,t)=>({x:e.x,y:e.y,z:(null==n?void 0:n.weights[t])||0})))),console.log(null==n?void 0:n.weights)},[t,n]),_)?(0,s.jsxs)(l.t,{width:x,height:g,margin:{top:20,right:20,bottom:20,left:20},children:[(0,s.jsx)(i.d,{}),(0,s.jsx)(r.W,{type:"number",dataKey:"x",domain:[p.xMin,p.xMax],allowDataOverflow:!0}),(0,s.jsx)(o.h,{type:"number",dataKey:"y",domain:[p.yMin,p.yMax],allowDataOverflow:!0}),(0,s.jsx)(u.K,{dataKey:"z",range:[100,1e3],zAxisId:1,scale:"sqrt"}),(0,s.jsx)(u.K,{dataKey:"z",range:[100,1e3],zAxisId:2,scale:"sqrt"}),(0,s.jsx)(c.m,{}),(0,s.jsx)(d.X,{name:"Distribution 1",data:f,fill:"#8884d8",fillOpacity:.4,shape:"circle",zAxisId:1}),n&&(0,s.jsx)(d.X,{name:"Distribution 2",data:M,fill:"#E57373",fillOpacity:.6,shape:"circle",zAxisId:2})]}):null};var x=n(39567),g=n.n(x);let _=(e,t)=>e.x>=t.xMin&&e.x<=t.xMax&&e.y>=t.yMin&&e.y<=t.yMax,y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t+n*Math.sqrt(-2*Math.log(e()))*Math.cos(2*Math.PI*e())},f=(e,t,n)=>{let s=g()(e),a=[];for(let e=0;e<t;e++)a.push({x:n.xMin+s()*(n.xMax-n.xMin),y:n.yMin+s()*(n.yMax-n.yMin)});return{points:a,weights:Array(t).fill(1/t)}},m=(e,t,n,s,a)=>{let l=g()(e),i=[];for(;i.length<t;){let e={x:y(l,n.x,s),y:y(l,n.y,s)};_(e,a)&&i.push(e)}return{points:i,weights:Array(t).fill(1/t)}},M=(e,t,n,s)=>{let a=g()(e),l=[];for(let e=0;e<t;e++){let e=2*a()*Math.PI,t=s*Math.sqrt(a());l.push({x:n.x+t*Math.cos(e),y:n.y+t*Math.sin(e)})}return{points:l,weights:Array(t).fill(1/t)}};var j=n(83572),b=n.n(j);let v=(e,t,n)=>{let s=n.length,a=Array(s);for(let e=0;e<s;e++){a[e]=Array(s);for(let n=0;n<s;n++)a[e][n]=t(e,n)}let l=Array(s).fill(0);for(let e=0;e<s;e++)l[e]=n.reduce((t,n,s)=>t+n*a[s][e],0);let i=Number.POSITIVE_INFINITY,r=-1;for(let e=0;e<s;e++)l[e]<i&&(i=l[e],r=e);let o=[r],u=new Set(Array.from({length:s},(e,t)=>t));for(u.delete(r);o.length<e;){let e=o[o.length-1];for(let t of u){let n=a[t][e],s=a[t];for(let e of u)s[e]=Math.min(s[e],n)}for(let e of u)l[e]=Array.from(u).reduce((t,s)=>t+n[s]*a[s][e],0);let t=-1,s=Number.POSITIVE_INFINITY;for(let e of u)l[e]<s&&(s=l[e],t=e);o.push(t),b()(u.delete(t))}return o.sort((e,t)=>e-t)},N=(e,t,n)=>{let s=n.length,a=e.length,l=e.map(e=>n[e]),i=new Set(e);for(let r=0;r<s;r++)if(!i.has(r)){let s=Number.POSITIVE_INFINITY,i=-1;for(let n=0;n<a;n++){let a=t(r,e[n]);a<s&&(s=a,i=n)}l[i]+=n[r]}return l},I={points:[],weights:[]};var C=n(68334),w=n.n(C);let S={xMin:0,xMax:1,yMin:0,yMax:1},A=(e,t)=>{switch(e){case"uniform":return f(t,100,S);case"gaussian":return m(t,100,{x:.5,y:.5},.3,S);case"circular":return M(t,100,{x:.5,y:.5},.5)}},z=e=>(t,n)=>{let s=e[t],a=e[n];return Math.sqrt((s.x-a.x)**2+(s.y-a.y)**2)},F=()=>{let[e,t]=(0,a.useState)("42"),[n,l]=(0,a.useState)("uniform"),[i,r]=(0,a.useState)(I),[o,u]=(0,a.useState)([]),[c,d]=(0,a.useState)(I),[h,x]=(0,a.useState)(0),[g,_]=(0,a.useState)(!1),y=(0,a.useCallback)(()=>{let t=A(n,e);r(t),u(v(t.points.length,z(t.points),t.weights)),x(0),_(!1),d(I)},[e,n]),f=(0,a.useCallback)(e=>{if(0===e||!i.points.length)return I;let t=o.slice(0,e),n=N(t,z(i.points),i.weights);return{points:t.map(e=>i.points[e]),weights:n}},[i,o]);return(0,a.useEffect)(()=>{d(f(h))},[h,f]),(0,a.useEffect)(()=>{if(!g||!i.points.length)return;let e=setInterval(()=>{x(e=>e>=o.length?(_(!1),e):e+1)},500);return()=>clearInterval(e)},[g,o.length,i.points.length]),(0,s.jsx)("div",{className:w().page,children:(0,s.jsxs)("main",{className:w().main,children:[(0,s.jsx)("h1",{children:"Scenario Reduction"}),(0,s.jsxs)("div",{className:w().controlsContainer,children:[(0,s.jsxs)("div",{className:w().topControls,children:[(0,s.jsxs)("div",{className:w().seedInput,children:[(0,s.jsx)("label",{htmlFor:"seed",children:"Seed:"}),(0,s.jsx)("input",{type:"text",id:"seed",value:e,onChange:e=>t(e.target.value),className:w().seedField})]}),(0,s.jsxs)("div",{className:w().distributionSelect,children:[(0,s.jsx)("label",{htmlFor:"distribution-type",children:"Distribution:"}),(0,s.jsxs)("select",{id:"distribution-type",value:n,onChange:e=>l(e.target.value),className:w().distributionField,children:[(0,s.jsx)("option",{value:"uniform",children:"Uniform"}),(0,s.jsx)("option",{value:"gaussian",children:"Gaussian"}),(0,s.jsx)("option",{value:"circular",children:"Circular Uniform"})]})]}),(0,s.jsx)("button",{onClick:y,className:w().generateButton,children:"Generate New Distribution"})]}),i.points.length>0&&(0,s.jsxs)("div",{className:w().playControls,children:[(0,s.jsx)("button",{onClick:()=>{h>=o.length&&x(0),_(e=>!e)},className:w().playButton,children:g?"Pause":"Play"}),(0,s.jsxs)("div",{className:w().sliderContainer,children:[(0,s.jsx)("input",{type:"range",min:"0",max:o.length,value:h,onChange:e=>{x(Number(e.target.value)),_(!1)},className:w().slider}),(0,s.jsxs)("span",{className:w().stepCount,children:[h,"/",o.length]})]})]})]}),(0,s.jsxs)("div",{className:w().currentVisualization,children:[(0,s.jsxs)("h3",{children:["Using ",h," point(s)"]}),(0,s.jsx)(p,{distribution1:i,distribution2:c,bounds:{xMin:0,xMax:1,yMin:0,yMax:1},width:600,height:600})]})]})})};function P(){return(0,s.jsx)(F,{})}},68334:e=>{e.exports={page:"page_page__ZU32B",main:"page_main__GlU4n",ctas:"page_ctas__g5wGe",primary:"page_primary__V8M9Y",secondary:"page_secondary__lm_PT",footer:"page_footer__sHKi3",seedInput:"page_seedInput__MwBpR",seedField:"page_seedField__n5xVl",controls:"page_controls__MGrPX",generateButton:"page_generateButton__brATS",playButton:"page_playButton__egZrD",distributionSelect:"page_distributionSelect__KyIMJ",distributionField:"page_distributionField__IHZpc",sliderContainer:"page_sliderContainer__9hu_f",slider:"page_slider__ByN4U",stepCount:"page_stepCount___uJaP",controlsContainer:"page_controlsContainer__ygMcm",topControls:"page_topControls__2nMnR",playControls:"page_playControls__pjrgY",logo:"page_logo__7fc9l"}}},e=>{var t=t=>e(e.s=t);e.O(0,[397,571,441,517,358],()=>t(85453)),_N_E=e.O()}]);